\RequirePackage{swa-language}
\RequirePackage{swa-platform}

\ifcsvoid{abstract}{
  \newenvironment{abstract}{}{}
}{}

\ifcsvoid{zusammenfassung}{
  \newenvironment{zusammenfassung}{}{}
}{}

\ifboolexpr{bool{xetex}}{
  \renewenvironment{abstract}{%
    \begingroup
    \let\raggedsection\centering
    \begin{english}
    \addchap*{\abstractname}
  }{%
    \end{english}
    \endgroup
  }
  \renewenvironment{zusammenfassung}{%
    \begingroup
    \let\raggedsection\centering
    \begin{german}
    \addchap*{\abstractname}
  }{%
    \end{german}
    \endgroup
  }
}{%%% non-xetex uses babel.
  \renewenvironment{abstract}{%
    \begingroup
    \let\raggedsection\centering
    \selectlanguage{english}
    \addchap*{\abstractname}
  }{%
    \endgroup
  }
  \renewenvironment{zusammenfassung}{%
    \begingroup
    \let\raggedsection\centering
    \selectlanguage{ngerman}
    \addchap*{\abstractname}
  }{%
    \endgroup
  }
}
%
